{"version":3,"file":"index.js","names":["_react","_interopRequireDefault","require","_reactRedux","_propTypes","_Message","_MessageDivider","_jsxRuntime","e","__esModule","default","isToday","date","today","Date","getDate","getMonth","getFullYear","ChatBox","_ref","chatboxContainerRef","messageList","apiIsLoading","useSelector","state","learningAssistant","messagesBeforeToday","filter","m","timestamp","messagesToday","jsxs","ref","className","children","map","_ref2","role","content","jsx","variant","message","length","text","_ref3","propTypes","PropTypes","oneOfType","func","shape","current","instanceOf","Element","isRequired","_default","exports"],"sources":["../../../src/components/ChatBox/index.jsx"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Message from '../Message';\nimport './ChatBox.scss';\nimport MessageDivider from '../MessageDivider';\n\nfunction isToday(date) {\n  const today = new Date();\n  return (\n    date.getDate() === today.getDate()\n    && date.getMonth() === today.getMonth()\n    && date.getFullYear() === today.getFullYear()\n  );\n}\n\n// container for all of the messages\nconst ChatBox = ({ chatboxContainerRef }) => {\n  const { messageList, apiIsLoading } = useSelector(state => state.learningAssistant);\n  const messagesBeforeToday = messageList.filter((m) => (!isToday(new Date(m.timestamp))));\n  const messagesToday = messageList.filter((m) => (isToday(new Date(m.timestamp))));\n\n  // message divider should not display if no messages or if all messages sent today.\n  return (\n    <div ref={chatboxContainerRef} className=\"flex-grow-1 scroller d-flex flex-column pb-4\">\n      {messagesBeforeToday.map(({ role, content, timestamp }) => (\n        <Message key={timestamp} variant={role} message={content} />\n      ))}\n      {(messageList.length !== 0 && messagesBeforeToday.length !== 0) && (<MessageDivider text=\"Today\" />)}\n      {messagesToday.map(({ role, content, timestamp }) => (\n        <Message key={timestamp} variant={role} message={content} />\n      ))}\n      {apiIsLoading && (\n        <div className=\"loading\">Xpert is thinking</div>\n      )}\n    </div>\n  );\n};\n\nChatBox.propTypes = {\n  chatboxContainerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n};\n\nexport default ChatBox;\n"],"mappings":"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","ignoreList":[]}